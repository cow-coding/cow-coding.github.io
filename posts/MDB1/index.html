<!DOCTYPE html><html lang="en" data-mode="light" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="day-prompt" content="days ago"><meta name="hour-prompt" content="hours ago"><meta name="minute-prompt" content="minutes ago"><meta name="justnow-prompt" content="just now"><meta name="generator" content="Jekyll v4.2.1" /><meta property="og:title" content="[Medipush Project] MongoDB" /><meta property="og:locale" content="en" /><meta name="description" content="시작하며" /><meta property="og:description" content="시작하며" /><link rel="canonical" href="https://cow-coding.github.io/posts/MDB1/" /><meta property="og:url" content="https://cow-coding.github.io/posts/MDB1/" /><meta property="og:site_name" content="Coding Gallery" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2020-08-19T00:00:00+09:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="[Medipush Project] MongoDB" /><meta name="twitter:site" content="@twitter_username" /><meta name="google-site-verification" content="TXb5nWUV5Ag0O8EVGMTUS11ZVi7BYOensPMiRdQGNRg" /> <script type="application/ld+json"> {"description":"시작하며","url":"https://cow-coding.github.io/posts/MDB1/","@type":"BlogPosting","headline":"[Medipush Project] MongoDB","dateModified":"2022-01-14T02:41:57+09:00","datePublished":"2020-08-19T00:00:00+09:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://cow-coding.github.io/posts/MDB1/"},"@context":"https://schema.org"}</script><title>[Medipush Project] MongoDB | Coding Gallery</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="Coding Gallery"><meta name="application-name" content="Coding Gallery"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://fonts.gstatic.com"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="preconnect" href="https://cdn.jsdelivr.net"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1.1.0/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4761810170892865" crossorigin="anonymous"></script><body data-spy="scroll" data-target="#toc" data-topbar-visible="true"><div id="sidebar" class="d-flex flex-column align-items-end" lang="en"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" alt="avatar" class="mx-auto"> <img src="/assets/img/my_img/icebear.jpeg" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">Coding Gallery</a></div><div class="site-subtitle font-italic">마침표를 찍고 조금 더 멀리</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tag ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info-circle ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center align-items-center"> <a href="https://github.com/cow-coding" aria-label="github" target="_blank" rel="noopener"> <i class="fab fa-github"></i> </a> <a href="https://twitter.com/twitter_username" aria-label="twitter" target="_blank" rel="noopener"> <i class="fab fa-twitter"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['kbp0237','gmail.com'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a></div></div><div id="topbar-wrapper" class="row justify-content-center"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/"> Home </a> </span> <span>[Medipush Project] MongoDB</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> <i class="fa fa-times-circle fa-fw" id="search-cleaner"></i> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="core-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>[Medipush Project] MongoDB</h1><div class="post-meta text-muted"><div> By <em> <a href="https://github.com/cow-coding">Park Kibum</a> </em></div><div class="d-flex"><div> <span> Posted <em class="timeago" date="2020-08-19 00:00:00 +0900" data-toggle="tooltip" data-placement="bottom" title="Wed, Aug 19, 2020, 12:00 AM +0900" >Aug 19, 2020</em> </span> <span> Updated <em class="timeago" date="2022-01-14 02:41:57 +0900 " data-toggle="tooltip" data-placement="bottom" title="Fri, Jan 14, 2022, 2:41 AM +0900" >Jan 14, 2022</em> </span> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="1881 words"> <em>10 min</em> read</span></div></div></div><div class="post-content"><h1 id="시작하며">시작하며</h1><p>몽고DB를 설치하고 활용하는 과정에서 GUI프로그램으로 Robo 3T를 사용하게된다. 기본적으로 파이썬 프로그래밍이나 DB를 다룰 때 사용되는 콘솔 명령어를 Robo 3T에서도 사용이 가능하지만, GUI 프로그램이므로 클릭으로도 형성이 가능한 경우가 많다.</p><h1 id="mongodb-데이터베이스-생성방식">MongoDB 데이터베이스 생성방식</h1><h2 id="비콘솔-방식">비콘솔 방식 <a href="#비콘솔-방식" class="anchor"><i class="fas fa-hashtag"></i></a></h2></h2><p><img data-src="/image/mdb/nonconsole.png" alt="" data-proofer-ignore></p><p>위의 사진처럼 PC서버를 연결하고 우클릭을 하면 Create Database가 나온다. 이를 클릭해서 이름을 짓고 만들 수 있다. 데이터베이스 만들 때는 이 방식을 추천한다.<br /> 무슨 에러인지는 모르겠는데 콘솔방식으로 만들면 Refresh해도 생성된 DB가 안 보인다…</p><h2 id="콘솔-방식">콘솔 방식 <a href="#콘솔-방식" class="anchor"><i class="fas fa-hashtag"></i></a></h2></h2><p><img data-src="/image/mdb/console.png" alt="" data-proofer-ignore></p><p>설정한 서버를 우클릭하면 Create Database말고 Open Shell이 나온다. 여기서 다음과 같은 명령어를 실행하면된다.</p><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>use database_name
</pre></table></code></div></div><p>사실 위의 명령어는 특정 데이터베이스로 이동할 때 사용하는 명령어기도 하다. 없는 경우에는 생성후 이동하게된다.</p><h1 id="mongodb의-crud방식">MongoDB의 CRUD방식</h1><p>일반적으로 데이터베이스의 기본은 CRUD라고한다.</p><ul><li>C : Create<li>R : Read<li>U : Update<li>D : Delete</ul><p>이 4가지를 자유자재로 다뤄야하고 효율적으로 운영하게 만드는 것이 핵심이다.<br /> RDBMS들과 마찬가지로 NoSQL에도 CRUD를 위한 명령어가 존재한다. GUI를 통해 만드는 방법도 있지만, 그건 뭐 굳이 설명할 필요가 없으니 명령어로 설명하겠다.</p><h2 id="create-document-collection-생성">Create (document, collection 생성) <a href="#create-document-collection-생성" class="anchor"><i class="fas fa-hashtag"></i></a></h2></h2><p>MongoDB가 사용하는 데이터 저장방식은 JSON방식을 사용한다. 그래서 저장하는 내용물을 document 즉, 문서라고 부르게된다.<br /> 일반적으로 RDBMS에서는 table을 만든다고한다. NoSQL에서 테이블과 같은 역할을 하는 것이 바로 collection이다.<br /> 기존의 RDBMS에서는 테이블의 생성과 변경이 이뤄지는데, 생성에는 <code class="language-plaintext highlighter-rouge">CREATE</code>, 테이블 수정에는 <code class="language-plaintext highlighter-rouge">ALTER</code>를 사용했다. 하지만 NoSQL에서는 <code class="language-plaintext highlighter-rouge">ALTER</code>의 역할이 필요가 없어지는데, 이유는 NoSQL은 RDBMS와 다르게 컬럼의 규격 제한이 없기 때문이다. 저장하는 document별로 컬럼 값의 변경이 가능하기 때문이다.</p><p>이제 NoSQL과 RDBMS의 문법을 비교하면서 콘솔 명령어를 설명하겠다.</p><p><strong>RDBMS</strong></p><div class="language-sql highlighter-rouge"><div class="code-header"> <span data-label-text="Sql"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre><td class="rouge-code"><pre><span class="k">CREATE</span> <span class="k">TABLE</span> <span class="n">emp</span> <span class="p">(</span>
  <span class="n">id</span> <span class="nb">INT</span> <span class="k">NOT</span> <span class="k">NULL</span> <span class="n">AUTO</span> <span class="k">INCREMENT</span><span class="p">,</span>
  <span class="n">user_id</span> <span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">30</span><span class="p">),</span>
  <span class="n">age</span> <span class="nb">INT</span><span class="p">,</span>
  <span class="n">status</span> <span class="nb">CHAR</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span>
  <span class="k">PRIMARY</span> <span class="k">KEY</span> <span class="p">(</span><span class="n">id</span><span class="p">)</span>
<span class="p">);</span>
</pre></table></code></div></div><p><strong>NoSQL</strong> (use database로 특정 db로 이동한 후로 가정)</p><div class="language-sql highlighter-rouge"><div class="code-header"> <span data-label-text="Sql"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
</pre><td class="rouge-code"><pre><span class="n">db</span><span class="p">.</span><span class="n">createCollection</span><span class="p">(</span><span class="nv">"emp"</span><span class="p">)</span>
<span class="n">db</span><span class="p">.</span><span class="n">createCollection</span><span class="p">(</span><span class="nv">"emp1"</span><span class="p">,</span> <span class="p">{</span> <span class="n">capped</span><span class="p">:</span> <span class="k">true</span><span class="p">,</span> <span class="k">size</span><span class="p">:</span> <span class="mi">10000</span><span class="p">})</span>
<span class="o">//</span> <span class="n">collection</span><span class="err">을</span> <span class="err">만들</span> <span class="err">때</span><span class="p">,</span> <span class="err">저장사이즈</span> <span class="err">크기를</span> <span class="err">고정시킬</span> <span class="err">수</span> <span class="err">있다</span><span class="p">.</span> <span class="err">옵션부여</span>

<span class="n">db</span><span class="p">.</span><span class="n">emp</span><span class="p">.</span><span class="n">insertOne</span><span class="p">(</span> <span class="p">{</span> <span class="n">user_id</span><span class="p">:</span> <span class="nv">"abcd1"</span><span class="p">,</span> <span class="n">age</span><span class="p">:</span> <span class="mi">24</span><span class="p">,</span> <span class="n">status</span><span class="p">:</span> <span class="nv">"A"</span> <span class="p">}</span> <span class="p">)</span>

<span class="n">db</span><span class="p">.</span><span class="n">emp</span><span class="p">.</span><span class="n">insertMany</span><span class="p">(</span>
  <span class="p">[</span>
    <span class="p">{</span> <span class="n">user_id</span><span class="p">:</span> <span class="nv">"abcd2"</span><span class="p">,</span> <span class="n">age</span><span class="p">:</span> <span class="mi">26</span><span class="p">,</span> <span class="n">status</span><span class="p">:</span> <span class="nv">"A"</span> <span class="p">},</span>
    <span class="p">{</span> <span class="n">user_id</span><span class="p">:</span> <span class="nv">"abcd3"</span><span class="p">,</span> <span class="n">age</span><span class="p">:</span> <span class="mi">18</span><span class="p">,</span> <span class="n">status</span><span class="p">:</span> <span class="nv">"B"</span> <span class="p">},</span>
    <span class="p">{</span> <span class="n">user_id</span><span class="p">:</span> <span class="nv">"bcde4"</span><span class="p">,</span> <span class="n">age</span><span class="p">:</span> <span class="mi">46</span><span class="p">,</span> <span class="n">status</span><span class="p">:</span> <span class="nv">"C"</span> <span class="p">},</span>
    <span class="p">{</span> <span class="n">user_id</span><span class="p">:</span> <span class="nv">"abcd5"</span><span class="p">,</span> <span class="n">age</span><span class="p">:</span> <span class="mi">33</span><span class="p">,</span> <span class="n">status</span><span class="p">:</span> <span class="nv">"B"</span> <span class="p">}</span>
  <span class="p">]</span>
<span class="p">)</span>
</pre></table></code></div></div><p>위의 명령어는 모두 같은 역할을 한다. 재밌는 점은 기존의 RDBMS는 테이블을 만들 때, 규격을 정하고 그에 맞는 데이터들만 집어넣는다. 하지만 NoSQL에서는 우선 collection을 이름만 지어서 만든다. (필요에 따라서 옵션을 부여할 수 있다.) 그리고 그 후에 넣는 컬럼들의 데이터 타입은 들어가는 데이터의 형식에 따라서 결정된다.</p><p><img data-src="/image/mdb/dataex1.png" alt="" data-proofer-ignore></p><p>여기서 좀 특이한 점이라면, RDBMS에서는 명시해주는 PRIMARY KEY의 역할을 자동적으로 _id라는 변수가 맡게된다.</p><h2 id="read-데이터-탐색">Read (데이터 탐색) <a href="#read-데이터-탐색" class="anchor"><i class="fas fa-hashtag"></i></a></h2></h2><h3 id="문법-작성">문법 작성 <a href="#문법-작성" class="anchor"><i class="fas fa-hashtag"></i></a></h3></h3><p>역시나 RDBMS에서 사용하는 방식과는 꽤 많이 다르다. 사실 document를 읽는 문법은 RDBMS보다 직관력이 많이 떨어지고 손이 많이 간다고 생각된다. 이유는 비교 문법때문인데, 같은 탐색문을 이번에도 적어보겠다.</p><p><strong>RDBMS</strong></p><div class="language-sql highlighter-rouge"><div class="code-header"> <span data-label-text="Sql"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="k">SELECT</span> <span class="n">user_id</span><span class="p">,</span> <span class="n">age</span> <span class="k">FROM</span> <span class="n">emp</span> <span class="k">WHERE</span> <span class="n">age</span> <span class="o">&gt;</span> <span class="mi">30</span><span class="p">;</span>
</pre></table></code></div></div><p><strong>NoSQL</strong></p><div class="language-sql highlighter-rouge"><div class="code-header"> <span data-label-text="Sql"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre><td class="rouge-code"><pre><span class="n">db</span><span class="p">.</span><span class="n">emp</span><span class="p">.</span><span class="n">find</span><span class="p">(</span>
  <span class="p">{</span> <span class="n">age</span><span class="p">:</span> <span class="p">{</span> <span class="err">$</span><span class="n">gt</span><span class="p">:</span> <span class="mi">30</span> <span class="p">}</span> <span class="p">},</span>
  <span class="p">{</span> <span class="n">user_id</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="n">age</span><span class="p">:</span> <span class="mi">1</span> <span class="p">}</span>
<span class="p">)</span>
</pre></table></code></div></div><p>아마 문법으로 보고 물음표 한 3개 정도 뜨면 정상인거다. 직관력이 많이 떨어진다는 이유는 바로 비교기호를 사용하지 않는다는 점이다. 마치 HTML문서에 작성하듯이 코드를 활용해서 비교문을 작성한다.<br /> 그리고 역시나 문법이므로 작성순서가 존재하는데, 앞에 나오는 중괄호는 조건문의 역할이고 뒤에 나오는 중괄호는 옵션이라고 부르고 탐색하고자 하는 컬럼을 1로 명시해준다. 만약 모든 데이터를 탐색한다면, 조건만 적거나, 내용이 빈 중괄호만 작성하면된다.</p><p><img data-src="/image/mdb/findex1.png" alt="" data-proofer-ignore></p><p>이때, _id변수는 0으로 지정하지 않는 이상 무조건 데이터를 표시한다. 위에서 말했듯이 _id의 역할은 데이터를 구분해주는 역할을 하게 된다.</p><h3 id="문법-종류">문법 종류 <a href="#문법-종류" class="anchor"><i class="fas fa-hashtag"></i></a></h3></h3><p>데이터 탐색을 할 때 사용하는 문법이 까다롭다는 것은 예시를 통해서 알았으니 이제 사용 문법을 좀 정리할 필요가 있다.</p><ul><li>$eq : =<li>$in : 해당 데이터를 갖는 자료<li>$gt : &gt;<li>$gte : &gt;=<li>$lt : &lt;<li>$lte : &lt;=<li>$ne : !=<li>$nin : 해당 데이터가 없는 자료<li>db.collection_name.distinct(“column_name”) : 특정 컬럼의 종류를 반환</ul><p>AND문법은 단순히 콤마(,)로 이어서 작성하면 되지만 OR은 형식이 존재한다.</p><div class="language-sql highlighter-rouge"><div class="code-header"> <span data-label-text="Sql"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre><span class="n">db</span><span class="p">.</span><span class="n">emp</span><span class="p">.</span><span class="n">find</span><span class="p">(</span>
  <span class="p">{</span> <span class="err">$</span><span class="k">or</span><span class="p">:</span> <span class="p">[</span> <span class="p">{</span> <span class="n">status</span><span class="p">:</span> <span class="nv">"A"</span> <span class="p">},</span> <span class="p">{</span> <span class="n">age</span><span class="p">:</span> <span class="mi">20</span> <span class="p">}</span> <span class="p">]}</span>
<span class="p">)</span>
</pre></table></code></div></div><h1 id="update-데이터-수정">Update (데이터 수정)</h1><p>데이터 수정도 역시나 데이터베이스에서는 중요하다. 기존에 RDBMS를 좀 공부해 본 사람이라면 대충 느낌이 오겠지만, 데이터 수정에서는 조건이 활용되므로 탐색과정에서 활용한 조건 문법들을 활용해야한다.</p><p><strong>RDBMS</strong></p><div class="language-sql highlighter-rouge"><div class="code-header"> <span data-label-text="Sql"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="k">UPDATE</span> <span class="n">emp</span> <span class="k">SET</span> <span class="n">status</span> <span class="o">=</span> <span class="nv">"B"</span> <span class="k">WHERE</span> <span class="n">age</span> <span class="o">&gt;</span> <span class="mi">40</span><span class="p">;</span>
</pre></table></code></div></div><p><strong>NoSQL</strong></p><div class="language-sql highlighter-rouge"><div class="code-header"> <span data-label-text="Sql"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre><td class="rouge-code"><pre><span class="o">//</span> <span class="n">Many</span><span class="err">는</span> <span class="n">One</span><span class="err">으로</span> <span class="err">바꾸면</span> <span class="err">데이터</span> <span class="mi">1</span><span class="err">개만</span> <span class="err">찾는다</span><span class="p">.</span>
<span class="n">db</span><span class="p">.</span><span class="n">emp</span><span class="p">.</span><span class="n">updateMany</span><span class="p">(</span>
  <span class="p">{</span> <span class="n">age</span><span class="p">:</span> <span class="p">{</span> <span class="err">$</span><span class="n">gt</span><span class="p">:</span> <span class="mi">40</span> <span class="p">}</span> <span class="p">},</span>
  <span class="p">{</span> <span class="err">$</span><span class="k">set</span><span class="p">:</span> <span class="p">{</span> <span class="n">status</span><span class="p">:</span> <span class="nv">"B"</span> <span class="p">}</span> <span class="p">}</span>
<span class="p">)</span>
</pre></table></code></div></div><p>이거 보면 진짜 NoSQL은 $를 좋아하는 것 같다. 그리고 마치 굉장히 불편해 보인다고 생각이 들지만 자세히보면 꼭 그렇지도 않다. 필요한 묶음은 모두 같은 중괄호에 묶어버리면 되기 때문이다. 그래서 익숙해지면 생각보다 눈에 잘 들어오게 카테고리화가 된다.</p><h1 id="delete">Delete</h1><p>삭제 구문은 크게 어렵지않다. 역시나 RDBMS에서도 특정 조건으로 삭제가 가능한 것처럼 여기서도 조건문으로 활용하거나, { }로 작성해서 모든 데이터 삭제가 가능하다.</p><p><strong>RDBMS</strong></p><div class="language-sql highlighter-rouge"><div class="code-header"> <span data-label-text="Sql"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="k">DELETE</span> <span class="k">FROM</span> <span class="n">emp</span> <span class="k">WHERE</span> <span class="n">status</span> <span class="o">=</span> <span class="nv">"A"</span><span class="p">;</span>
</pre></table></code></div></div><p><strong>NoSQL</strong></p><div class="language-sql highlighter-rouge"><div class="code-header"> <span data-label-text="Sql"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre><td class="rouge-code"><pre><span class="o">//</span> <span class="n">One</span><span class="err">이면</span> <span class="err">데이터</span> <span class="mi">1</span><span class="err">개만</span> <span class="err">삭제</span>
<span class="n">db</span><span class="p">.</span><span class="n">emp</span><span class="p">.</span><span class="n">deleteMany</span><span class="p">(</span>
  <span class="p">{</span> <span class="n">status</span><span class="p">:</span> <span class="nv">"A"</span> <span class="p">}</span>
<span class="p">)</span>
</pre></table></code></div></div></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/project/'>Project</a>, <a href='/categories/medipush/'>Medipush</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/medipush/" class="post-tag no-text-decoration" >Medipush</a> <a href="/tags/project/" class="post-tag no-text-decoration" >project</a> <a href="/tags/nosql/" class="post-tag no-text-decoration" >NoSQL</a> <a href="/tags/mongodb/" class="post-tag no-text-decoration" >MongoDB</a> <a href="/tags/crud/" class="post-tag no-text-decoration" >CRUD</a> <a href="/tags/database/" class="post-tag no-text-decoration" >database</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=[Medipush Project] MongoDB - Coding Gallery&url=https://cow-coding.github.io/posts/MDB1/" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=[Medipush Project] MongoDB - Coding Gallery&u=https://cow-coding.github.io/posts/MDB1/" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://telegram.me/share?text=[Medipush Project] MongoDB - Coding Gallery&url=https://cow-coding.github.io/posts/MDB1/" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="Copy link" title-succeed="Link copied successfully!"> </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted"><div class="access"><div id="access-lastmod" class="post"><div class="panel-heading">Recently Updated</div><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/coursera2_3/">[MLOps Specialization / Step2] Labeling Data</a><li><a href="/posts/module/">[BoostCamp AI Tech / 심화포스팅] torch.nn.Module 뜯어먹기</a><li><a href="/posts/list/">[Deep Dive Python] 2. List</a><li><a href="/posts/variable/">[Deep Dive Python] 1. Python의 객체와 변수 개념</a><li><a href="/posts/final7/">[BoostCamp AI Tech / Final] Day91 - Airflow setting 및 배치 파이프라인 설계</a></ul></div><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/ai-tech/">AI Tech</a> <a class="post-tag" href="/tags/boostcamp/">BoostCamp</a> <a class="post-tag" href="/tags/naver/">NAVER</a> <a class="post-tag" href="/tags/deep-learning/">Deep Learning</a> <a class="post-tag" href="/tags/mlops/">MLOps</a> <a class="post-tag" href="/tags/data-engineering/">Data Engineering</a> <a class="post-tag" href="/tags/project/">Project</a> <a class="post-tag" href="/tags/basic/">Basic</a> <a class="post-tag" href="/tags/python/">Python</a> <a class="post-tag" href="/tags/recommender-system/">Recommender System</a></div></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"><div class="panel-heading pl-3 pt-2 mb-2">Contents</div><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="tail-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/medipush/"><div class="card-body"> <em class="timeago small" date="2020-08-21 00:00:00 +0900" >Aug 21, 2020</em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>[Medipush Project] AWS connect</h3><div class="text-muted small"><p> 시작하며 기초적인 MongoDB 사용도 알았으니 이제 AWS 서버랑 연결해서 데이터베이스 구축을 해보자. 전체적인 구축 방식은 Google colab을 활용해서 의약품안전나라에 있는 의약품 정보를 크롤링해서 데이터베이스를 구축할 예정이다. 데이터베이스 저장위치는 AWS EC2를 활용할 예정이고 팀원 중 서버담당을 맡는 친구가 이미 AWS EC2 세...</p></div></div></a></div><div class="card"> <a href="/posts/database1/"><div class="card-body"> <em class="timeago small" date="2020-08-26 00:00:00 +0900" >Aug 26, 2020</em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>[Medipush Project] Database 구축</h3><div class="text-muted small"><p> 시작하며 데이터베이스를 저장할 AWS 연결도 끝났고 이제 데이터베이스를 구축할 차례다. 데이터베이스 구축은 파이썬 크롤링을 통해서 만들 예정이다. 파이썬의 dictionary와 list를 적절히 잘 활용하면 단순히 코드로만 JSON형식의 파일을 만들 수 있다. 이번 프로젝트의 데이터베이스 MongoDB기반의 NoSQL이므로 총 2가지 document을...</p></div></div></a></div><div class="card"> <a href="/posts/cabinet1/"><div class="card-body"> <em class="timeago small" date="2021-02-04 00:00:00 +0900" >Feb 4, 2021</em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>[Cabinet Project] 사물함 배정 프로그램 개발일지 1 - 로그인 화면, API 개발</h3><div class="text-muted small"><p> 시작하며 이번에 학과에서 회장을 맡게되면서 해결해야할 여러 문제들이 많이 생겼다. 사실 이 문제들은 모든게 코로나때문에 생겨난 문제들이다. 작년부터 갑자기 모든 것들이 비대면으로 진행되면서 학생들을 대상으로하는 여러 업무처리가 대부분 대면으로만 있던 것들이 결국 발목을 잡았다. 그 중 가장 큰 문제 중 하나가 바로 학생들의 사물함을 배정하는 일이었...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/DFS/" class="btn btn-outline-primary" prompt="Older"><p>[Data Structure] DFS (깊이 우선 탐색)</p></a> <a href="/posts/medipush/" class="btn btn-outline-primary" prompt="Newer"><p>[Medipush Project] AWS connect</p></a></div><div id="disqus_thread" class="pt-2 pb-2"><p class="text-center text-muted small"> Comments powered by <a href="https://disqus.com/">Disqus</a>.</p></div><script type="text/javascript"> var disqus_config = function () { this.page.url = 'https://cow-coding.github.io/posts/MDB1/'; this.page.identifier = '/posts/MDB1/'; }; /* Lazy loading */ var disqus_observer = new IntersectionObserver(function (entries) { if(entries[0].isIntersecting) { (function () { var d = document, s = d.createElement('script'); s.src = 'https://cow-coding.disqus.com/embed.js'; s.setAttribute('data-timestamp', +new Date()); (d.head || d.body).appendChild(s); })(); disqus_observer.disconnect(); } }, { threshold: [0] }); disqus_observer.observe(document.querySelector('#disqus_thread')); /* Auto switch theme */ function reloadDisqus() { /* Disqus hasn't been loaded */ if (typeof DISQUS === "undefined") { return; } if (document.readyState == 'complete') { DISQUS.reset({ reload: true, config: disqus_config }); } } const modeToggle = document.querySelector(".mode-toggle"); if (typeof modeToggle !== "undefined") { /* modeToggle.addEventListener('click', reloadDisqus); // not pretty for 'color-scheme' */ window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', reloadDisqus); } </script></div></div></div><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center text-muted"><div class="footer-left"><p class="mb-0"> © 2023 <a href="https://github.com/cow-coding">Park Kibum</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/ai-tech/">AI Tech</a> <a class="post-tag" href="/tags/boostcamp/">BoostCamp</a> <a class="post-tag" href="/tags/naver/">NAVER</a> <a class="post-tag" href="/tags/deep-learning/">Deep Learning</a> <a class="post-tag" href="/tags/mlops/">MLOps</a> <a class="post-tag" href="/tags/data-engineering/">Data Engineering</a> <a class="post-tag" href="/tags/project/">Project</a> <a class="post-tag" href="/tags/basic/">Basic</a> <a class="post-tag" href="/tags/python/">Python</a> <a class="post-tag" href="/tags/recommender-system/">Recommender System</a></div></div></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/lozad/dist/lozad.min.js,npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/popper.js@1.16.1,npm/bootstrap@4/dist/js/bootstrap.min.js"></script> <script defer src="/app.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id=UA-163727422-1"></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'UA-163727422-1'); }); </script>
