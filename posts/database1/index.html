<!DOCTYPE html><html lang="en" data-mode="light" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="day-prompt" content="days ago"><meta name="hour-prompt" content="hours ago"><meta name="minute-prompt" content="minutes ago"><meta name="justnow-prompt" content="just now"><meta name="generator" content="Jekyll v4.2.1" /><meta property="og:title" content="[Medipush Project] Database 구축" /><meta property="og:locale" content="en" /><meta name="description" content="시작하며 데이터베이스를 저장할 AWS 연결도 끝났고 이제 데이터베이스를 구축할 차례다. 데이터베이스 구축은 파이썬 크롤링을 통해서 만들 예정이다. 파이썬의 dictionary와 list를 적절히 잘 활용하면 단순히 코드로만 JSON형식의 파일을 만들 수 있다. 이번 프로젝트의 데이터베이스 MongoDB기반의 NoSQL이므로 총 2가지 document을 갖게된다. 환자의 정보를 저장하는 document인 patient와 의약품 정보를 저장하는 collection인 medicine document이다." /><meta property="og:description" content="시작하며 데이터베이스를 저장할 AWS 연결도 끝났고 이제 데이터베이스를 구축할 차례다. 데이터베이스 구축은 파이썬 크롤링을 통해서 만들 예정이다. 파이썬의 dictionary와 list를 적절히 잘 활용하면 단순히 코드로만 JSON형식의 파일을 만들 수 있다. 이번 프로젝트의 데이터베이스 MongoDB기반의 NoSQL이므로 총 2가지 document을 갖게된다. 환자의 정보를 저장하는 document인 patient와 의약품 정보를 저장하는 collection인 medicine document이다." /><link rel="canonical" href="https://cow-coding.github.io/posts/database1/" /><meta property="og:url" content="https://cow-coding.github.io/posts/database1/" /><meta property="og:site_name" content="Coding Gallery" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2020-08-26T00:00:00+09:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="[Medipush Project] Database 구축" /><meta name="twitter:site" content="@twitter_username" /><meta name="google-site-verification" content="TXb5nWUV5Ag0O8EVGMTUS11ZVi7BYOensPMiRdQGNRg" /> <script type="application/ld+json"> {"description":"시작하며 데이터베이스를 저장할 AWS 연결도 끝났고 이제 데이터베이스를 구축할 차례다. 데이터베이스 구축은 파이썬 크롤링을 통해서 만들 예정이다. 파이썬의 dictionary와 list를 적절히 잘 활용하면 단순히 코드로만 JSON형식의 파일을 만들 수 있다. 이번 프로젝트의 데이터베이스 MongoDB기반의 NoSQL이므로 총 2가지 document을 갖게된다. 환자의 정보를 저장하는 document인 patient와 의약품 정보를 저장하는 collection인 medicine document이다.","url":"https://cow-coding.github.io/posts/database1/","@type":"BlogPosting","headline":"[Medipush Project] Database 구축","dateModified":"2022-01-14T02:41:57+09:00","datePublished":"2020-08-26T00:00:00+09:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://cow-coding.github.io/posts/database1/"},"@context":"https://schema.org"}</script><title>[Medipush Project] Database 구축 | Coding Gallery</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="Coding Gallery"><meta name="application-name" content="Coding Gallery"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://fonts.gstatic.com"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="preconnect" href="https://cdn.jsdelivr.net"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1.1.0/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4761810170892865" crossorigin="anonymous"></script><body data-spy="scroll" data-target="#toc" data-topbar-visible="true"><div id="sidebar" class="d-flex flex-column align-items-end" lang="en"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" alt="avatar" class="mx-auto"> <img src="/assets/img/my_img/icebear.jpeg" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">Coding Gallery</a></div><div class="site-subtitle font-italic">마침표를 찍고 조금 더 멀리</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tag ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info-circle ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center align-items-center"> <a href="https://github.com/cow-coding" aria-label="github" target="_blank" rel="noopener"> <i class="fab fa-github"></i> </a> <a href="https://twitter.com/twitter_username" aria-label="twitter" target="_blank" rel="noopener"> <i class="fab fa-twitter"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['kbp0237','gmail.com'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a></div></div><div id="topbar-wrapper" class="row justify-content-center"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/"> Home </a> </span> <span>[Medipush Project] Database 구축</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> <i class="fa fa-times-circle fa-fw" id="search-cleaner"></i> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="core-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>[Medipush Project] Database 구축</h1><div class="post-meta text-muted"><div> By <em> <a href="https://github.com/cow-coding">Park Kibum</a> </em></div><div class="d-flex"><div> <span> Posted <em class="timeago" date="2020-08-26 00:00:00 +0900" data-toggle="tooltip" data-placement="bottom" title="Wed, Aug 26, 2020, 12:00 AM +0900" >Aug 26, 2020</em> </span> <span> Updated <em class="timeago" date="2022-01-14 02:41:57 +0900 " data-toggle="tooltip" data-placement="bottom" title="Fri, Jan 14, 2022, 2:41 AM +0900" >Jan 14, 2022</em> </span> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="3302 words"> <em>18 min</em> read</span></div></div></div><div class="post-content"><h1 id="시작하며">시작하며</h1><p>데이터베이스를 저장할 AWS 연결도 끝났고 이제 데이터베이스를 구축할 차례다.<br /> 데이터베이스 구축은 파이썬 크롤링을 통해서 만들 예정이다. 파이썬의 dictionary와 list를 적절히 잘 활용하면 단순히 코드로만 JSON형식의 파일을 만들 수 있다. 이번 프로젝트의 데이터베이스 MongoDB기반의 NoSQL이므로 총 2가지 document을 갖게된다. 환자의 정보를 저장하는 document인 patient와 의약품 정보를 저장하는 collection인 medicine document이다.</p><h1 id="database-modeling">Database modeling</h1><p>데이터베이스 구축 코딩 이전에 데이터베이스 모델링을 우선 작성해봤다. 앞에서 말했듯이 2가지 document를 모델링 해야한다.<br /> 아직 데이터베이스 모델링과 데이터베이스의 지식이 많이 부족해서 이해가 안되는 모델링 방식도 있을 수 있으니 양해바란다.</p><h2 id="patient-document-modeling">patient document modeling <a href="#patient-document-modeling" class="anchor"><i class="fas fa-hashtag"></i></a></h2></h2><h3 id="초기-모델링">초기 모델링 <a href="#초기-모델링" class="anchor"><i class="fas fa-hashtag"></i></a></h3></h3><p>우선 환자정보를 저장할 patient document를 모델링해보자.<br /> 초기에 디자인한 patient document는 다음과 같았다.</p><div class="language-yaml highlighter-rouge"><div class="code-header"> <span data-label-text="YAML"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
</pre><td class="rouge-code"><pre><span class="pi">{</span>
  <span class="nv">_id</span><span class="pi">:</span> <span class="nv">&lt;ObjectId1&gt;</span>
  <span class="nv">patient_info</span><span class="pi">:</span> <span class="pi">{</span>
    <span class="nv">name</span><span class="pi">:</span> <span class="s2">"</span><span class="s">patient_name"</span><span class="pi">,</span>
    <span class="nv">SSN</span><span class="pi">:</span> <span class="s2">"</span><span class="s">200825-1234567"</span><span class="pi">,</span>
    <span class="nv">pregnant</span><span class="pi">:</span> <span class="nv">false</span>
  <span class="pi">},</span>
  <span class="nv">take_med</span><span class="pi">:[</span>
    <span class="pi">{</span>
      <span class="nv">prod_name</span><span class="pi">:</span> <span class="s2">"</span><span class="s">medicine_name"</span><span class="pi">,</span>
      <span class="nv">take_session</span><span class="pi">:</span> <span class="pi">[</span><span class="nv">true</span><span class="pi">,</span> <span class="nv">true</span><span class="pi">,</span> <span class="nv">false</span><span class="pi">]</span>
    <span class="pi">}</span>
  <span class="pi">]</span>
<span class="pi">}</span>
</pre></table></code></div></div><p>간단하게 데이터의 구조를 설명해보면 환자의 인적사항을 저장하는 patient_info document를 Embedded 형식으로 저장하려고 했다.<br /> 그리고 take_med는 현재 데이터를 갖는 환자가 복용하고 있는 의약품의 정보가 배열로 저장되는 document이다. prod_name은 의약품의 이름이다.<br /> take_session은 크기가 3으로 고정인 배열로 유지가 되는데, 이유는 일반적으로 약국에서 약을 제공할 때 아침, 점심, 저녁으로 제공하는 경우가 많다. 각각의 배열 인덱스는 순서대로 아침, 점심, 저녁인지 아닌지를 저장하는 bool type 변수이다. 이렇게 초기 모델링을 진행했는데, 약사가 사용하는 환자정보 입력은 웹을 통해서 진행을 하게된다. 이때, 웹에서 입력받은 데이터를 묶어서 입력하는 과정에 문제가 발생해서 patient_info를 따로 Embedded document형식이 아닌 밖으로 분리하는 방식을 택했다.<br /> 나중에 생각해보면 굳이 해당 환자 인적정보를 다른 document에 입력할 이유가 없으므로 Embedded형식으로 만들 이유가 없었다.</p><h3 id="최종-모델링">최종 모델링 <a href="#최종-모델링" class="anchor"><i class="fas fa-hashtag"></i></a></h3></h3><div class="language-yaml highlighter-rouge"><div class="code-header"> <span data-label-text="YAML"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
</pre><td class="rouge-code"><pre><span class="pi">{</span>
  <span class="nv">_id</span><span class="pi">:</span> <span class="nv">&lt;ObjectId1&gt;</span>
  <span class="nv">name</span><span class="pi">:</span> <span class="s2">"</span><span class="s">patient_name"</span><span class="pi">,</span>
  <span class="nv">SSN</span><span class="pi">:</span> <span class="s2">"</span><span class="s">200825-1234567"</span><span class="pi">,</span>
  <span class="nv">pregnant</span><span class="pi">:</span> <span class="nv">false</span><span class="pi">,</span>
  <span class="nv">take_med</span><span class="pi">:[</span>
    <span class="pi">{</span>
      <span class="nv">prod_name</span><span class="pi">:</span> <span class="s2">"</span><span class="s">medicine_name"</span><span class="pi">,</span>
      <span class="nv">take_session</span><span class="pi">:</span> <span class="pi">[</span><span class="nv">true</span><span class="pi">,</span> <span class="nv">true</span><span class="pi">,</span> <span class="nv">false</span><span class="pi">]</span>
    <span class="pi">},</span>
    <span class="nv">...</span>
  <span class="pi">]</span>
<span class="pi">}</span>
</pre></table></code></div></div><h2 id="medicine-document-modeling">medicine document modeling <a href="#medicine-document-modeling" class="anchor"><i class="fas fa-hashtag"></i></a></h2></h2><p>이번 프로젝트에서 가장 큰 크기를 차지하게 될 document다.<br /> 사실 실전으로 들어가면 대한민국 국민이 5천만이라서 patient가 가장 큰 document겠지만, 임시구현에서는 의약품 정보를 담고있는 medicine document가 가장 크다.</p><h3 id="최종-모델링-1">최종 모델링 <a href="#최종-모델링-1" class="anchor"><i class="fas fa-hashtag"></i></a></h3></h3><div class="language-yaml highlighter-rouge"><div class="code-header"> <span data-label-text="YAML"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
</pre><td class="rouge-code"><pre><span class="pi">{</span>
  <span class="nv">_id</span><span class="pi">:</span> <span class="nv">&lt;ObjectId2&gt;</span>
  <span class="nv">prodName</span><span class="pi">:</span> <span class="s2">"</span><span class="s">medicine_name"</span><span class="pi">,</span>
  <span class="nv">ingredient</span><span class="pi">:</span> <span class="pi">[</span><span class="s2">"</span><span class="s">ingr1"</span><span class="pi">,</span> <span class="s2">"</span><span class="s">ingr2"</span><span class="pi">,</span> <span class="nv">...</span><span class="pi">],</span>
  <span class="nv">cautionInfo</span><span class="pi">:</span> <span class="pi">[</span>
    <span class="pi">{</span>
      <span class="nv">ingr</span><span class="pi">:</span> <span class="s2">"</span><span class="s">caution_ingr_name"</span>
      <span class="nv">dur</span><span class="pi">:</span> <span class="s2">"</span><span class="s">dur_type"</span>
    <span class="pi">},</span>
    <span class="nv">...</span>
  <span class="pi">]</span>
<span class="pi">}</span>
</pre></table></code></div></div><h3 id="크롤링-사이트-탐색">크롤링 사이트 탐색 <a href="#크롤링-사이트-탐색" class="anchor"><i class="fas fa-hashtag"></i></a></h3></h3><p>medicine 도큐먼트는 웹 크롤링을 통해서 데이터를 구축하려고했다. 그래서 의약품 데이터를 찾던 도중 <a href="http://www.health.kr">약학정보원</a>을 크롤링 사이트로 선정을 했었다. 문제는 약학정보원의 의약품 검색 페이지 양식이 asp파일로 구성되었고 페이지 분석이 너무 어렵고 대부분이 jQuery의 형태를 띄고 있어서 beautifulsoup를 활용해서 크롤링이 너무 어려웠다.<br /> 그래서 약학정보원에 문의해서 데이터베이스를 제공받을 수 있는지 알아봤는데, 1년에 50만원으로 계약을 진행하는 것이라 이번 프로젝트에서 사용하기에 무리로 판단해서 다른 사이트로 선회했다.<br /> 약학정보원에 문의를 하던 도중에 식약처에서 제공하는 의약품정보 데이터가 있을 수 있다고 하여서 식약처에서 의약품을 관할하는 사이트인 <a href="https://nedrug.mfds.go.kr/index">의약품안전나라</a> 웹 페이지를 분석했다.<br /> 다행히도 의약품안전나라에서 제공하는 의약품 상세정보는 페이지가 GET방식을 활용했다.</p><p><img data-src="/image/medipush/getpage.png" alt="" data-proofer-ignore> 페이지의 링크를 자세히보면 itemSeq라는 변수로 페이지가 이동함을 알 수 있다. 여기서 itemSeq는 의약품안전나라 의약품검색에서 ‘품목기준코드’정보임을 쉽게 알 수 있었다.</p><p><img data-src="/image/medipush/itemcode.png" alt="" data-proofer-ignore> 그래서 모든 데이터를 수집하기는 무리이므로 의약품 중에서 완제품만 품목코드를 크롤링했다. 품목코드 크롤링은 R을 활용해서 csv파일로 저장했다. <del>(그 당시 코딩할땐 코딩한 기억이 있는데 좀 멀쩡한 상태로 코딩하려니 갑자기 안된다…. ㅠㅠ)</del></p><h3 id="사이트-분석">사이트 분석 <a href="#사이트-분석" class="anchor"><i class="fas fa-hashtag"></i></a></h3></h3><p>우선 의약품안전나라의 의약품 상세정보 사이트를 분석해보면</p><p><img data-src="/image/medipush/med_info.png" alt="" data-proofer-ignore> 의약품 제품명과 유효성분을 가져올 수 있다. 이 정보는 의약품 정보에 저장하기엔 충분히 유효한 정보다.</p><p><img data-src="/image/medipush/dur.png" alt="" data-proofer-ignore> 이 부분은 DUR이라고해서 의약품을 복용할 때 주의할 점을 말해주는 사용정보이다. 의약품 정보에 충분히 기록할만하다. 하지만 이 부분은 모든 의약품이 갖는 정보가 아니다. 그래서 조건문으로 이 부분이 존재하는 경우에만 데이터를 가져오기로 한다.</p><h3 id="crawling-code">Crawling code <a href="#crawling-code" class="anchor"><i class="fas fa-hashtag"></i></a></h3></h3><h4 id="library-and-module-import-and-connect-aws">library and module import and connect AWS <a href="#library-and-module-import-and-connect-aws" class="anchor"><i class="fas fa-hashtag"></i></a></h4></h4><div class="language-py highlighter-rouge"><div class="code-header"> <span data-label-text="Python"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
</pre><td class="rouge-code"><pre><span class="kn">import</span> <span class="nn">pymongo</span>
<span class="kn">import</span> <span class="nn">requests</span>
<span class="kn">import</span> <span class="nn">re</span>
<span class="kn">import</span> <span class="nn">csv</span>
<span class="kn">import</span> <span class="nn">urllib.parse</span>
<span class="kn">from</span> <span class="nn">bs4</span> <span class="kn">import</span> <span class="n">beautifulsoup</span>
<span class="kn">from</span> <span class="nn">urllib.request</span> <span class="kn">import</span> <span class="n">urlopen</span>
<span class="kn">from</span> <span class="nn">multiprocessing</span> <span class="kn">import</span> <span class="n">Pool</span><span class="p">,</span> <span class="n">Manager</span>

<span class="n">conn</span> <span class="o">=</span> <span class="n">pymongo</span><span class="p">.</span><span class="n">MongoClient</span><span class="p">(</span><span class="s">'AWS IP address'</span><span class="p">,</span> <span class="n">uesrname</span><span class="o">=</span><span class="s">'username'</span><span class="p">,</span>
                            <span class="n">password</span><span class="o">=</span><span class="s">'password'</span><span class="p">,</span>
                            <span class="n">authMechanism</span><span class="o">=</span><span class="s">'SCRAM-SHA-1'</span><span class="p">)</span>

<span class="n">medipush</span> <span class="o">=</span> <span class="n">conn</span><span class="p">.</span><span class="n">medipush</span>
</pre></table></code></div></div><p>MongoDB를 연결하고 데이터를 넣을 라이브러리인 pymongo를 필요로한다. 그리고 크롤링을 위해서 beautifulsoup를 같이 연결해줘야한다. re와 parse는 페이지 분석 후 데이터를 넣기위해서 문자열 데이터를 정제할 때 사용한다.<br /> MongoClient함수를 활용해서 연결해주면된다. 보안이 없으면 단순히 IP만 적으면 되지만 보안 연결이 된 경우에는 Robo 3T에 연결할 때 처럼 알맞은 정보를 입력해주면된다.</p><h4 id="csv-read">csv read <a href="#csv-read" class="anchor"><i class="fas fa-hashtag"></i></a></h4></h4><div class="language-py highlighter-rouge"><div class="code-header"> <span data-label-text="Python"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre><td class="rouge-code"><pre><span class="n">f</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s">'med_code.csv'</span><span class="p">,</span> <span class="s">'r'</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s">'utf-8'</span><span class="p">)</span>
<span class="n">rdr</span> <span class="o">=</span> <span class="n">csv</span><span class="p">.</span><span class="n">reader</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>

<span class="n">lists</span> <span class="o">=</span> <span class="p">[]</span>

<span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">rdr</span><span class="p">:</span>
  <span class="n">lists</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>

<span class="n">f</span><span class="p">,</span><span class="n">close</span><span class="p">()</span>
</pre></table></code></div></div><p>이 부분은 ‘품목기준코드’를 리스트로 저장해서 웹페이지 변동에 사용한다. lists의 내부 데이터를 보면 2차원 배열 형태라서 후에 조금 조절을 해줘야한다.</p><h4 id="crawling">Crawling <a href="#crawling" class="anchor"><i class="fas fa-hashtag"></i></a></h4></h4><p>총 품목코드 개수가 44469개인데 크롤링과정에서 너무 오랜시간이 걸려서 1만개 데이터베이스만 구축했다.</p><div class="language-py highlighter-rouge"><div class="code-header"> <span data-label-text="Python"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
</pre><td class="rouge-code"><pre><span class="n">manager</span><span class="o">=</span> <span class="n">Manager</span><span class="p">()</span>
<span class="n">med_data_list</span> <span class="o">=</span> <span class="n">manager</span><span class="p">.</span><span class="nb">list</span><span class="p">()</span>
<span class="n">cnt</span> <span class="o">=</span> <span class="n">manager</span><span class="p">.</span><span class="nb">list</span><span class="p">()</span>
<span class="n">index</span> <span class="o">=</span> <span class="n">lists</span>
<span class="n">medicine</span> <span class="o">=</span> <span class="n">medipush</span><span class="p">.</span><span class="n">medicine</span>
<span class="n">error_index</span> <span class="o">=</span> <span class="n">manager</span><span class="p">.</span><span class="nb">list</span><span class="p">()</span>

<span class="k">def</span> <span class="nf">crawling</span><span class="p">(</span><span class="n">i</span><span class="p">):</span>
  <span class="n">cnt</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
  <span class="k">print</span><span class="p">(</span><span class="s">'count : '</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">cnt</span><span class="p">))</span>
  <span class="k">print</span><span class="p">(</span><span class="s">'Now data number : '</span><span class="p">,</span> <span class="n">index</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span>
  <span class="n">url</span> <span class="o">=</span> <span class="s">"https://nedrug.mfds.go.kr/pbp/CCBBB01/getItemDetail?itemSeq="</span> <span class="o">+</span> <span class="n">index</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>

  <span class="n">res</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>

  <span class="n">soup</span> <span class="o">=</span> <span class="n">BeautifulSoup</span><span class="p">(</span><span class="n">res</span><span class="p">.</span><span class="n">content</span><span class="p">,</span> <span class="s">'html.parser'</span><span class="p">)</span>
  <span class="n">med_basic</span> <span class="o">=</span> <span class="n">soup</span><span class="p">.</span><span class="n">select_one</span><span class="p">(</span><span class="s">'div.r_sec tr'</span><span class="p">)</span>

  <span class="c1"># HTTPError인 경우 데이터 처리
</span>  <span class="k">if</span> <span class="n">med_basic</span> <span class="o">==</span> <span class="bp">None</span><span class="p">:</span>
    <span class="n">error_index</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
    <span class="k">return</span>

  <span class="c1"># product name save
</span>  <span class="n">med_dict</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">()</span>
  <span class="n">med_name</span> <span class="o">=</span> <span class="n">med_basic</span><span class="p">.</span><span class="n">select_one</span><span class="p">(</span><span class="s">'td'</span><span class="p">).</span><span class="n">text</span>
  <span class="n">input_med</span> <span class="o">=</span> <span class="n">med_name</span><span class="p">.</span><span class="n">replace</span><span class="p">(</span><span class="s">'</span><span class="se">\n</span><span class="s">'</span><span class="p">,</span> <span class="s">' '</span><span class="p">)</span>
  <span class="n">med_dict</span><span class="p">[</span><span class="s">'prodName'</span><span class="p">]</span> <span class="o">=</span> <span class="n">input_med</span><span class="p">.</span><span class="n">strip</span><span class="p">()</span>

  <span class="c1"># 병용금기 전용 유효성분 저장 리스트
</span>  <span class="n">ingr_list</span> <span class="o">=</span> <span class="nb">list</span><span class="p">()</span>

  <span class="c1"># product ingredient save
</span>  <span class="k">if</span> <span class="n">soup</span><span class="p">.</span><span class="n">select_one</span><span class="p">(</span><span class="s">'#scroll_02 &gt; h3'</span><span class="p">):</span>
    <span class="n">med_ingredient</span> <span class="o">=</span> <span class="n">soup</span><span class="p">.</span><span class="n">select_one</span><span class="p">(</span><span class="s">'#scroll_02 &gt; h3'</span><span class="p">).</span><span class="n">text</span>
    <span class="n">med_ingredient</span> <span class="o">=</span> <span class="n">med_ingredient</span><span class="p">.</span><span class="n">replace</span><span class="p">(</span><span class="s">'유효성분 : '</span><span class="p">,</span> <span class="s">''</span><span class="p">)</span>
    <span class="n">ingredient</span> <span class="o">=</span> <span class="n">med_ingredient</span><span class="p">.</span><span class="n">split</span><span class="p">(</span><span class="s">','</span><span class="p">)</span>
    <span class="n">med_dict</span><span class="p">[</span><span class="s">'ingredient'</span><span class="p">]</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">ingredient</span><span class="p">))</span>
    <span class="n">ingr_list</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">ingredient</span><span class="p">))</span>


  <span class="c1"># product caution save
</span>  <span class="c1">## dur info exist
</span>  <span class="k">if</span> <span class="n">soup</span><span class="p">.</span><span class="n">select_one</span><span class="p">(</span><span class="s">'#scroll_06 &gt; table'</span><span class="p">):</span>

    <span class="n">temp</span> <span class="o">=</span> <span class="n">soup</span><span class="p">.</span><span class="n">select</span><span class="p">(</span><span class="s">'#scroll_06 &gt; table &gt; tbody &gt; tr &gt; td'</span><span class="p">)</span>
    <span class="n">dur_info</span> <span class="o">=</span> <span class="nb">list</span><span class="p">()</span>
    <span class="n">tmp</span> <span class="o">=</span> <span class="nb">list</span><span class="p">()</span>

    <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">temp</span><span class="p">:</span>
      <span class="n">tmp</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">item</span><span class="p">.</span><span class="n">text</span><span class="p">.</span><span class="n">split</span><span class="p">(</span><span class="s">'</span><span class="se">\n</span><span class="s">'</span><span class="p">))</span>

    <span class="n">data_insert</span> <span class="o">=</span> <span class="bp">False</span>
    <span class="n">name</span> <span class="o">=</span> <span class="nb">list</span><span class="p">()</span>
    <span class="n">dur_list</span> <span class="o">=</span> <span class="nb">list</span><span class="p">()</span>

    <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">tmp</span><span class="p">:</span>
      <span class="n">dur_data_input</span> <span class="o">=</span> <span class="bp">False</span>
      <span class="nb">input</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">()</span>

      <span class="k">if</span> <span class="s">"DUR성분(성분1/성분2..[병용성분])"</span> <span class="ow">in</span> <span class="n">item</span><span class="p">:</span>
        <span class="n">dur_ingredient</span> <span class="o">=</span> <span class="n">item</span><span class="p">[</span><span class="n">item</span><span class="p">.</span><span class="n">index</span><span class="p">(</span><span class="s">'DUR성분(성분1/성분2..[병용성분])'</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span>

      <span class="k">if</span> <span class="s">"DUR유형"</span> <span class="ow">in</span> <span class="n">item</span><span class="p">:</span>
        <span class="n">dur_type</span> <span class="o">=</span> <span class="n">item</span><span class="p">[</span><span class="n">item</span><span class="p">.</span><span class="n">index</span><span class="p">(</span><span class="s">'DUR유형'</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span>

        <span class="k">if</span> <span class="n">item</span><span class="p">[</span><span class="n">item</span><span class="p">.</span><span class="n">index</span><span class="p">(</span><span class="s">'DUR유형'</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s">'병용금기'</span><span class="p">:</span>
          <span class="n">dur_data_input</span> <span class="o">=</span> <span class="bp">True</span>
          <span class="n">data_insert</span> <span class="o">=</span> <span class="bp">True</span>
          <span class="c1"># dur_mix를 저장하는 딕셔너리 생성
</span>          <span class="c1">## 문자열 파싱 파트
</span>          <span class="n">dur_main</span> <span class="o">=</span> <span class="n">re</span><span class="p">.</span><span class="n">sub</span><span class="p">(</span><span class="s">'\[\w*\]'</span><span class="p">,</span> <span class="s">''</span><span class="p">,</span> <span class="n">dur_ingredient</span><span class="p">)</span>
          <span class="n">dur_mix</span> <span class="o">=</span> <span class="n">re</span><span class="p">.</span><span class="n">search</span><span class="p">(</span><span class="s">'\[\w*\]'</span><span class="p">,</span> <span class="n">dur_ingredient</span><span class="p">)</span>
          <span class="n">dur_mix</span> <span class="o">=</span> <span class="n">dur_mix</span><span class="p">.</span><span class="n">group</span><span class="p">().</span><span class="n">replace</span><span class="p">(</span><span class="s">'['</span><span class="p">,</span><span class="s">''</span><span class="p">).</span><span class="n">replace</span><span class="p">(</span><span class="s">']'</span><span class="p">,</span><span class="s">''</span><span class="p">)</span>

          <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="n">ingr_list</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">dur_mix</span> <span class="ow">in</span> <span class="n">t</span><span class="p">:</span>
              <span class="c1"># 부분일치가 dur_mix에 있는 경우 dur_main을 넣어줘야함
</span>              <span class="n">mix</span> <span class="o">=</span> <span class="bp">True</span>
              <span class="k">break</span>
            <span class="k">elif</span> <span class="n">dur_main</span> <span class="ow">in</span> <span class="n">t</span><span class="p">:</span>
              <span class="c1"># 부분일치가 dur_main에 있는 경우 dur_mix에 넣어줘야함
</span>              <span class="n">mix</span> <span class="o">=</span> <span class="bp">False</span>
              <span class="k">break</span>
            <span class="k">else</span><span class="p">:</span>
              <span class="n">mix</span> <span class="o">=</span> <span class="bp">False</span>

          <span class="k">if</span> <span class="n">mix</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">dur_main</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">name</span><span class="p">:</span>
              <span class="n">name</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">dur_main</span><span class="p">)</span>
              <span class="nb">input</span><span class="p">[</span><span class="s">'ingr'</span><span class="p">]</span> <span class="o">=</span> <span class="n">dur_main</span>
              <span class="nb">input</span><span class="p">[</span><span class="s">'dur'</span><span class="p">]</span> <span class="o">=</span> <span class="s">'병용금기'</span>
            <span class="k">else</span><span class="p">:</span>
              <span class="k">continue</span>
          <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">dur_mix</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">name</span><span class="p">:</span>
              <span class="n">name</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">dur_mix</span><span class="p">)</span>
              <span class="nb">input</span><span class="p">[</span><span class="s">'ingr'</span><span class="p">]</span> <span class="o">=</span> <span class="n">dur_mix</span>
              <span class="nb">input</span><span class="p">[</span><span class="s">'dur'</span><span class="p">]</span> <span class="o">=</span> <span class="s">'병용금기'</span>
            <span class="k">else</span><span class="p">:</span>
              <span class="k">continue</span>

        <span class="k">elif</span> <span class="n">item</span><span class="p">[</span><span class="n">item</span><span class="p">.</span><span class="n">index</span><span class="p">(</span><span class="s">'DUR유형'</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span> <span class="o">!=</span> <span class="s">'분할주의'</span><span class="p">:</span>
          <span class="n">data_insert</span> <span class="o">=</span> <span class="bp">True</span>
          <span class="n">dur_data_input</span> <span class="o">=</span> <span class="bp">True</span>
          <span class="nb">input</span><span class="p">[</span><span class="s">'ingr'</span><span class="p">]</span> <span class="o">=</span> <span class="n">dur_ingredient</span>
          <span class="nb">input</span><span class="p">[</span><span class="s">'dur'</span><span class="p">]</span> <span class="o">=</span> <span class="n">dur_type</span>

        <span class="k">if</span> <span class="n">dur_data_input</span><span class="p">:</span>
          <span class="n">dur_list</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="nb">input</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">data_insert</span><span class="p">:</span>
      <span class="n">med_dict</span><span class="p">[</span><span class="s">'cautionInfo'</span><span class="p">]</span> <span class="o">=</span> <span class="n">dur_list</span>

  <span class="n">medicine</span><span class="p">.</span><span class="n">insert_one</span><span class="p">(</span><span class="n">med_dict</span><span class="p">)</span>


<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">'__main__'</span><span class="p">:</span>
  <span class="n">med_data_list</span> <span class="o">=</span> <span class="n">manager</span><span class="p">.</span><span class="nb">list</span><span class="p">()</span>
  <span class="n">start_time</span> <span class="o">=</span> <span class="n">time</span><span class="p">.</span><span class="n">time</span><span class="p">()</span>
  <span class="n">pool</span> <span class="o">=</span> <span class="n">Pool</span><span class="p">(</span><span class="n">processes</span> <span class="o">=</span> <span class="mi">10</span><span class="p">)</span>
  <span class="n">pool</span><span class="p">.</span><span class="nb">map</span><span class="p">(</span><span class="n">crawling</span><span class="p">,</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">10000</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>
  <span class="n">pool</span><span class="p">.</span><span class="n">close</span><span class="p">()</span>
  <span class="n">conn</span><span class="p">.</span><span class="n">close</span><span class="p">()</span>
  <span class="k">print</span><span class="p">(</span><span class="s">'----------------------------------------</span><span class="se">\n</span><span class="s">'</span><span class="p">)</span>
  <span class="k">print</span><span class="p">(</span><span class="s">'                                        </span><span class="se">\n</span><span class="s">'</span><span class="p">)</span>
  <span class="k">print</span><span class="p">(</span><span class="s">'All data search end and Make a database!</span><span class="se">\n</span><span class="s">'</span><span class="p">)</span>
  <span class="k">print</span><span class="p">(</span><span class="s">'total time : '</span><span class="p">,</span><span class="n">time</span><span class="p">.</span><span class="n">time</span><span class="p">()</span> <span class="o">-</span> <span class="n">start_time</span><span class="p">)</span>
  <span class="k">print</span><span class="p">(</span><span class="s">'error product code list : '</span><span class="p">,</span> <span class="n">error_index</span><span class="p">)</span>
  <span class="k">print</span><span class="p">(</span><span class="s">'                                        </span><span class="se">\n</span><span class="s">'</span><span class="p">)</span>
  <span class="k">print</span><span class="p">(</span><span class="s">'----------------------------------------</span><span class="se">\n</span><span class="s">'</span><span class="p">)</span>
</pre></table></code></div></div><p>프로젝트 진행하면서 가장 많이 수정된 코드다. 우선 최종적인 코드를 간단하게 리뷰해보면 다음과 같이 구성되어 있다.</p><ol><li>제품 이름 설정<li>제품 성분 설정<li>제품 주의 내용 설정<li>병렬 연산으로 크롤링 속도 증가</ol><ul><li>1번 코드<ul><li>1번과 2번은 모든 의약품 대상으로 처리를 해준다. 이때 일부 페이지가 서버 로드가 느려서 HTTPError가 뜨는 경우가 있어서 1번 데이터에서 None 값이 잡히게 된다. 이 부분이 None값이 되면 insert_one에서 오류가 나서 프로세스가 종료가 된다. 그래서 해당 부분이 None일 때는 따로 개별 처리 단계로 넘기기 위해서 데이터 인덱스를 저장시키고 스킵시켰다.</ul><li>3번 코드 3번 코드는 굉장히 길다. 그래서 자세히 리뷰를 해보겠다.<ul><li>우선 크롤링 페이지에는 우리가 크롤링 하려는 위험 정보 즉, DUR정보가 있는 의약품이 있고 없는 의약품이 있다. 그래서 무조건적으로 해당 부분을 select_one을 하면 에러가 나서 프로세스 종료가 난다. 그래서 조건문 처리를 진행했다.<li>크롤링으로 가져온 데이터를 보면 ‘\n’으로 데이터가 구분되어 있음을 알 수 있다. 그래서 수집 데이터 중에서 필요한 부분만 인덱스를 가져오기 위해서 문자열 파싱을 진행했다.<li>변수의 역할을 설명해보면 data_insert는 이후에 자세히 설명을 하겠지만 DUR중에 유일하게 데이터 양식이 다른 데이터가 있는데, 그 데이터를 구분하기 위한 bool타입 변수다. name은 DUR성분을 보면 중복된 값들이 존재하는데, 중복데이터 처리를 위한 리스트다.<li>서버관리 파트 팀원의 요구로 자신이 가진 성분을 제외하고 병용금기 데이터를 가져와달라고 요청했다. 우선 병용금기 데이터를 보면 ‘성분1[성분2]’와 같은 방식으로 구성되어있는데, 성분1과 성분2의 문자열을 분리하는 작업을 진행해야했다.<li>그 후 성분을 저장한 리스트의 데이터를 탐색하면서 <code class="language-plaintext highlighter-rouge">if ~ in</code>문으로 성분1이 일치하는지, 성분2가 일치하는지를 확인해본다. 그 후에는 각주 설명처럼 코드를 연결해주면된다.</ul><li>4번 코드<ul><li>multiprocessing을 활용해서 병렬 연산처리를 진행했다. 기존의 크롤링으로 진행하면 100개 데이터 처리시 210초 정도 걸린 반면 8개 pool을 사용해서 크롤링할 경우 30초까지 줄일 수 있다. 그래서 10개 정도로 데이터 연산을 진행했다.<br /> 이 방식을 상대방 입장에선 서버 공격으로 느낄 수 있으므로 주의해야한다.</ul></ul></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/project/'>Project</a>, <a href='/categories/medipush/'>Medipush</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/medipush/" class="post-tag no-text-decoration" >Medipush</a> <a href="/tags/project/" class="post-tag no-text-decoration" >project</a> <a href="/tags/nosql/" class="post-tag no-text-decoration" >NoSQL</a> <a href="/tags/mongodb/" class="post-tag no-text-decoration" >MongoDB</a> <a href="/tags/database/" class="post-tag no-text-decoration" >database</a> <a href="/tags/aws-ec2/" class="post-tag no-text-decoration" >AWS EC2</a> <a href="/tags/colaboratory/" class="post-tag no-text-decoration" >colaboratory</a> <a href="/tags/crawling/" class="post-tag no-text-decoration" >crawling</a> <a href="/tags/beautifulsoup/" class="post-tag no-text-decoration" >beautifulsoup</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=[Medipush Project] Database 구축 - Coding Gallery&url=https://cow-coding.github.io/posts/database1/" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=[Medipush Project] Database 구축 - Coding Gallery&u=https://cow-coding.github.io/posts/database1/" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://telegram.me/share?text=[Medipush Project] Database 구축 - Coding Gallery&url=https://cow-coding.github.io/posts/database1/" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="Copy link" title-succeed="Link copied successfully!"> </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted"><div class="access"><div id="access-lastmod" class="post"><div class="panel-heading">Recently Updated</div><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/coursera2_3/">[MLOps Specialization / Step2] Labeling Data</a><li><a href="/posts/module/">[BoostCamp AI Tech / 심화포스팅] torch.nn.Module 뜯어먹기</a><li><a href="/posts/list/">[Deep Dive Python] 2. List</a><li><a href="/posts/variable/">[Deep Dive Python] 1. Python의 객체와 변수 개념</a><li><a href="/posts/final7/">[BoostCamp AI Tech / Final] Day91 - Airflow setting 및 배치 파이프라인 설계</a></ul></div><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/ai-tech/">AI Tech</a> <a class="post-tag" href="/tags/boostcamp/">BoostCamp</a> <a class="post-tag" href="/tags/naver/">NAVER</a> <a class="post-tag" href="/tags/deep-learning/">Deep Learning</a> <a class="post-tag" href="/tags/mlops/">MLOps</a> <a class="post-tag" href="/tags/data-engineering/">Data Engineering</a> <a class="post-tag" href="/tags/project/">Project</a> <a class="post-tag" href="/tags/basic/">Basic</a> <a class="post-tag" href="/tags/python/">Python</a> <a class="post-tag" href="/tags/recommender-system/">Recommender System</a></div></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"><div class="panel-heading pl-3 pt-2 mb-2">Contents</div><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="tail-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/medipush/"><div class="card-body"> <em class="timeago small" date="2020-08-21 00:00:00 +0900" >Aug 21, 2020</em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>[Medipush Project] AWS connect</h3><div class="text-muted small"><p> 시작하며 기초적인 MongoDB 사용도 알았으니 이제 AWS 서버랑 연결해서 데이터베이스 구축을 해보자. 전체적인 구축 방식은 Google colab을 활용해서 의약품안전나라에 있는 의약품 정보를 크롤링해서 데이터베이스를 구축할 예정이다. 데이터베이스 저장위치는 AWS EC2를 활용할 예정이고 팀원 중 서버담당을 맡는 친구가 이미 AWS EC2 세...</p></div></div></a></div><div class="card"> <a href="/posts/MDB1/"><div class="card-body"> <em class="timeago small" date="2020-08-19 00:00:00 +0900" >Aug 19, 2020</em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>[Medipush Project] MongoDB</h3><div class="text-muted small"><p> 시작하며 몽고DB를 설치하고 활용하는 과정에서 GUI프로그램으로 Robo 3T를 사용하게된다. 기본적으로 파이썬 프로그래밍이나 DB를 다룰 때 사용되는 콘솔 명령어를 Robo 3T에서도 사용이 가능하지만, GUI 프로그램이므로 클릭으로도 형성이 가능한 경우가 많다. MongoDB 데이터베이스 생성방식 비콘솔 방식 위의 사진처럼 PC서버를 연결하...</p></div></div></a></div><div class="card"> <a href="/posts/cabinet1/"><div class="card-body"> <em class="timeago small" date="2021-02-04 00:00:00 +0900" >Feb 4, 2021</em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>[Cabinet Project] 사물함 배정 프로그램 개발일지 1 - 로그인 화면, API 개발</h3><div class="text-muted small"><p> 시작하며 이번에 학과에서 회장을 맡게되면서 해결해야할 여러 문제들이 많이 생겼다. 사실 이 문제들은 모든게 코로나때문에 생겨난 문제들이다. 작년부터 갑자기 모든 것들이 비대면으로 진행되면서 학생들을 대상으로하는 여러 업무처리가 대부분 대면으로만 있던 것들이 결국 발목을 잡았다. 그 중 가장 큰 문제 중 하나가 바로 학생들의 사물함을 배정하는 일이었...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/medipush/" class="btn btn-outline-primary" prompt="Older"><p>[Medipush Project] AWS connect</p></a> <a href="/posts/DSArray/" class="btn btn-outline-primary" prompt="Newer"><p>[Go] Go로 만들어보는 자료구조 - 배열(Array)</p></a></div><div id="disqus_thread" class="pt-2 pb-2"><p class="text-center text-muted small"> Comments powered by <a href="https://disqus.com/">Disqus</a>.</p></div><script type="text/javascript"> var disqus_config = function () { this.page.url = 'https://cow-coding.github.io/posts/database1/'; this.page.identifier = '/posts/database1/'; }; /* Lazy loading */ var disqus_observer = new IntersectionObserver(function (entries) { if(entries[0].isIntersecting) { (function () { var d = document, s = d.createElement('script'); s.src = 'https://cow-coding.disqus.com/embed.js'; s.setAttribute('data-timestamp', +new Date()); (d.head || d.body).appendChild(s); })(); disqus_observer.disconnect(); } }, { threshold: [0] }); disqus_observer.observe(document.querySelector('#disqus_thread')); /* Auto switch theme */ function reloadDisqus() { /* Disqus hasn't been loaded */ if (typeof DISQUS === "undefined") { return; } if (document.readyState == 'complete') { DISQUS.reset({ reload: true, config: disqus_config }); } } const modeToggle = document.querySelector(".mode-toggle"); if (typeof modeToggle !== "undefined") { /* modeToggle.addEventListener('click', reloadDisqus); // not pretty for 'color-scheme' */ window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', reloadDisqus); } </script></div></div></div><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center text-muted"><div class="footer-left"><p class="mb-0"> © 2023 <a href="https://github.com/cow-coding">Park Kibum</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/ai-tech/">AI Tech</a> <a class="post-tag" href="/tags/boostcamp/">BoostCamp</a> <a class="post-tag" href="/tags/naver/">NAVER</a> <a class="post-tag" href="/tags/deep-learning/">Deep Learning</a> <a class="post-tag" href="/tags/mlops/">MLOps</a> <a class="post-tag" href="/tags/data-engineering/">Data Engineering</a> <a class="post-tag" href="/tags/project/">Project</a> <a class="post-tag" href="/tags/basic/">Basic</a> <a class="post-tag" href="/tags/python/">Python</a> <a class="post-tag" href="/tags/recommender-system/">Recommender System</a></div></div></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/lozad/dist/lozad.min.js,npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/popper.js@1.16.1,npm/bootstrap@4/dist/js/bootstrap.min.js"></script> <script defer src="/app.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id=UA-163727422-1"></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'UA-163727422-1'); }); </script>
